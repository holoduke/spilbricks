<!DOCTYPE html>
<html>

<head>
	
</head>

<body>

<script id="fragmentShader" type="x-shader/x-fragment">

			uniform float time;
			uniform vec2 resolution;

			uniform float fogDensity;
			uniform vec3 fogColor;

			uniform sampler2D texture1;
			uniform sampler2D texture2;

			varying vec2 vUv;

			void main( void ) {

				vec2 position = -0.1 + 0.2 * vUv;

				vec4 noise = texture2D( texture1, vUv );
				vec2 T1 = vUv + vec2( 1.5, -1.5 ) * time  *0.02;
				vec2 T2 = vUv + vec2( -0.5, 2.0 ) * time * 0.01;

				T1.x += noise.x * 2.0;
				T1.y += noise.y * 2.0;
				T2.x -= noise.y * 0.2;
				T2.y += noise.z * 0.2;

				float p = texture2D( texture1, T1 * 2.0 ).a;

				vec4 color = texture2D( texture2, T2 * 2.0 );
				vec4 temp = color * ( vec4( p, p, p, p ) * 2.0 ) + ( color * color - 0.1 );

				if( temp.r > 1.0 ){ temp.bg += clamp( temp.r - 2.0, 0.0, 100.0 ); }
				if( temp.g > 1.0 ){ temp.rb += temp.g - 1.0; }
				if( temp.b > 1.0 ){ temp.rg += temp.b - 1.0; }

				gl_FragColor = temp;

				float depth = gl_FragCoord.z / gl_FragCoord.w;
				const float LOG2 = 1.442695;
				float fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );
				fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );

				gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );

			}

		</script>

		<script id="vertexShader" type="x-shader/x-vertex">

			uniform vec2 uvScale;
			varying vec2 vUv;

			void main()
			{

				vUv = uvScale * uv;
				vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
				gl_Position = projectionMatrix * mvPosition;

			}

		</script>


<div style="">
<input id="x" type=text value=1.2>x</input>
<input id="y" type=text value=-9>y</input>
<input id="z" type=text value=5>z</input>
</div>

<div style="">
<input type="button" value="camera1" onclick="camera1()"></input>
<input type="button" value="camera2" onclick="camera2()"></input>
<input type="button" value="camera3" onclick="camera3()"></input>
</div>

<script>
function camera1(){
	moveTo(0.5,-1500,2623);
}
function camera3(){
	moveTo(0,-2000,3000);
}

function camera2(){
	
	moveTo(1.2,-2800,1423);
	
//	document.getElementById('x').value = 1.2;
	//document.getElementById('y').value = -2800;
	//document.getElementById('z').value =1423;
}

var steps = 10;
function moveTo(x,y,z){
	var waitx = 0;
	
	var xStepSize = Math.abs((x - document.getElementById('x').value * 1) /55);
	var yStepSize = Math.abs((y - document.getElementById('y').value * 1) / 55);
	var zStepSize = Math.abs((z - document.getElementById('z').value * 1) /55);
	
	console.log('move to ',x,y,z,xStepSize,yStepSize,zStepSize)
	function ani(){
	
		var cx = document.getElementById('x').value * 1;
		var cy = document.getElementById('y').value * 1;
		var cz = document.getElementById('z').value * 1;
		var ix = -1;
		var iy = -1;
		var iz = -1;
		
		if (x > cx){
			ix = 1;
		}
		if (y > cy){
			iy = 1;
		}
		if (z > cz){
			iz = 1;
		}
		
		var px = false;
		var py = false;
		var pz = false;
		
	
		var waitxnow = 0;
		
		setTimeout(function(){
			
			//document.getElementById('x').value = cx + ix;
			document.getElementById('y').value = Math.round((cy + (iy * yStepSize)) * 100)/100;
			document.getElementById('z').value = Math.round((cz + (iz * zStepSize)) * 100)/100;
			
			if (waitx > 30){
				console.log('go')
			document.getElementById('x').value = Math.round((cx + (ix * xStepSize)) * 100)/100;
			//document.getElementById('z').value = cz + iz;
			}
			else{
				waitx++;
			}
			
			
			if (document.getElementById('y').value / y  > 0.99 && document.getElementById('y').value / y < 1.01 ){
				//alert(document.getElementById('y').value /  y)
				py = true;
			}
			if (document.getElementById('x').value / x  > 0.99 && document.getElementById('x').value / x < 1.01 ){
				//alert(document.getElementById('y').value /  y)
				px = true;
			}
			if (document.getElementById('z').value / z  > 0.99 && document.getElementById('z').value / z < 1.01 ){
				//alert(document.getElementById('y').value /  y)
				pz = true;
			}
			
			if (px && py && pz) return
			
			ani();
		},10);
	}
	
	ani();
	
}


</script>


<div style="border-radius:10px;width:1020px;height:670px;margin: 0 auto;border:1px solid #888888;position:relative;">

	<div style="height:1030px; width:600px;margin-top:10px;margin-left:10px;position:relative;">
		
		<div id="3dcanvas" style="position:absolute;top:0;border-radius:10px;width:1000px;height:600px;"></div>
		<div id="3dcanvas2" style="position:absolute;top:0;border-radius:10px;width:1000px;height:600px;"></div>
	</div>
</div>

<canvas id="test" height=200 width=200></canvas>


<script type="text/javascript" src="http://mrdoob.github.com/three.js/build/three.min.js"></script>
<script type="text/javascript" src="js/util.js"></script>

<script type="text/javascript" src="lib/Box2dWeb-2.1.a.3.js"></script>
<script type="text/javascript" src="js/game_objects.js"></script>
<script type="text/javascript" src="js/explosion.js"></script>
<script type="text/javascript" src="js/brick_mechanics.js"></script>

<script type="text/javascript" src="js/brick.js"></script>

<script>
</script>





</body>
</html>